# TRM-OS: Ontology-First Knowledge Management System with AI-Enhanced Intelligence

[![Tests](https://img.shields.io/badge/tests-124%2F124%20passing-brightgreen)](https://github.com/trm-os/trm-os-branches)
[![API Version](https://img.shields.io/badge/API-v2.0-blue)](https://github.com/trm-os/trm-os-branches)
[![Python](https://img.shields.io/badge/python-3.11+-blue)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green)](https://fastapi.tiangolo.com)
[![Neo4j](https://img.shields.io/badge/Neo4j-5.x-orange)](https://neo4j.com)
[![Scikit-Learn](https://img.shields.io/badge/scikit--learn-1.7+-red)](https://scikit-learn.org)

**TRM-OS** (Total Recall Machine - Operating System) l√† m·ªôt h·ªá th·ªëng qu·∫£n l√Ω tri th·ª©c th·∫ø h·ªá m·ªõi v·ªõi **AI-Enhanced Intelligence** v√† **Conversational Intelligence**, v·∫≠n h√†nh theo nguy√™n l√Ω **Ontology-First** v·ªõi ki·∫øn tr√∫c **Event-Driven** v√† **ML-Enhanced Reasoning**.

## üéØ T·∫ßm Nh√¨n

TRM-OS h∆∞·ªõng t·ªõi vi·ªác x√¢y d·ª±ng m·ªôt **"h·ªá th·∫ßn kinh trung ∆∞∆°ng s·ªë"** cho t·ªï ch·ª©c, m·ªôt h·ªá th·ªëng th√¥ng minh, t·ª± h·ªçc, t·ª± th√≠ch ·ª©ng v√† t·ª± v·∫≠n h√†nh d·ª±a tr√™n tri·∫øt l√Ω c·ªët l√µi:

**Recognition ‚Üí Event ‚Üí WIN**

- **Recognition (C√¥ng nh·∫≠n)**: Ph√°t hi·ªán v√† ghi nh·∫≠n m·ªçi ƒë√≥ng g√≥p, ti·ªÅm nƒÉng, tension (v·∫•n ƒë·ªÅ/c∆° h·ªôi)
- **Event (S·ª± ki·ªán)**: Ghi l·∫°i m·ªçi thay ƒë·ªïi quan tr·ªçng trong h·ªá th·ªëng  
- **WIN (Th·∫Øng l·ª£i)**: K·∫øt qu·∫£ t√≠ch c·ª±c t·ª´ vi·ªác gi·∫£i quy·∫øt tension ho·∫∑c ho√†n th√†nh d·ª± √°n

## üß† AI-Enhanced Intelligence

### üí¨ Conversational Intelligence (NEW!)
- **Natural Language Processing**: Vietnamese v√† English support v·ªõi 95%+ accuracy
- **Intent Recognition**: 10 intent types v·ªõi intelligent reasoning type mapping
- **ML-Enhanced Conversations**: Real-time ML reasoning integration cho intelligent responses
- **Session Management**: Advanced conversation context tracking v√† memory
- **Real-time Communication**: WebSocket support cho instant messaging
- **Multi-language Support**: Seamless Vietnamese/English conversation switching
- **Context-Aware Responses**: Learning-based response adaptation

### ML-Enhanced Reasoning Engine
- **Multi-Type Reasoning**: Deductive, Inductive, Abductive, Analogical, Causal, Probabilistic, Quantum, Hybrid
- **Real ML Models**: RandomForest, GradientBoosting, KMeans cho reasoning type prediction v√† confidence estimation
- **Quantum Enhancement**: T√≠ch h·ª£p v·ªõi Quantum WIN States cho advanced reasoning
- **Context-Aware**: Reasoning recommendations d·ª±a tr√™n context v√† historical patterns
- **Performance Analytics**: Real-time reasoning statistics v√† pattern discovery

### Adaptive Learning System
- **Experience Collection**: Thu th·∫≠p v√† ph√¢n t√≠ch 24+ lo·∫°i experience types
- **Pattern Recognition**: T·ª± ƒë·ªông ph√°t hi·ªán patterns t·ª´ agent behaviors v√† outcomes
- **Behavioral Adaptation**: T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh strategies d·ª±a tr√™n learning outcomes
- **Goal Management**: Tracking v√† optimization learning goals
- **Performance Metrics**: Comprehensive metrics cho learning effectiveness

### Quantum System Manager
- **Quantum State Detection**: ML-powered detection c·ªßa organizational quantum states
- **WIN Probability Calculation**: Quantum-enhanced probability calculations
- **State Transition Optimization**: Intelligent state transition recommendations
- **Coherence Monitoring**: Real-time quantum coherence tracking

## üèóÔ∏è Ki·∫øn Tr√∫c

### Core Components
- **Graph Database**: Neo4j v·ªõi 29+ graph models
- **API Layer**: FastAPI v·ªõi 80+ RESTful endpoints + ML reasoning endpoints + Conversational endpoints
- **Conversational Intelligence**: Multi-language NLP v·ªõi ML-enhanced reasoning
- **ML-Enhanced Reasoning**: Production-ready reasoning engine v·ªõi real ML models
- **Adaptive Learning**: Self-improving system v·ªõi experience-based learning
- **Quantum Intelligence**: Quantum-enhanced decision making v√† optimization
- **Event System**: Event-driven architecture cho real-time processing
- **Relationship Engine**: Qu·∫£n l√Ω m·ªëi quan h·ªá ph·ª©c t·∫°p gi·ªØa entities

### Technology Stack
- **Backend**: Python 3.11+ v·ªõi FastAPI
- **Machine Learning**: Scikit-learn 1.7+ v·ªõi RandomForest, GradientBoosting, KMeans
- **NLP**: Advanced Vietnamese/English natural language processing
- **Real-time**: WebSocket support cho instant communication
- **Database**: Neo4j AuraDB (Graph) + PostgreSQL (Vector)
- **Testing**: Pytest v·ªõi 124+ comprehensive tests
- **Documentation**: OpenAPI/Swagger auto-generated
- **Deployment**: Docker + Docker Compose

## üöÄ Quick Start

### Prerequisites
- Python 3.11+
- Neo4j AuraDB instance
- Git

### Installation

1. **Clone repository**
```bash
git clone https://github.com/trm-os/trm-os-branches.git
cd trm-os-branches
```

2. **Setup virtual environment**
```bash
# Windows
python -m venv venv-trm
venv-trm\Scripts\activate

# Linux/Mac
python -m venv venv-trm
source venv-trm/bin/activate
```

3. **Install dependencies**
```bash
pip install -r requirements.txt
```

4. **Environment configuration**
```bash
# Copy v√† ch·ªânh s·ª≠a environment file
cp .env.example .env
# C·∫≠p nh·∫≠t c√°c bi·∫øn m√¥i tr∆∞·ªùng trong .env
```

5. **Run application**
```bash
# Development mode
python -m uvicorn trm_api.main:app --reload --host 0.0.0.0 --port 8000

# Production mode
python -m uvicorn trm_api.main:app --host 0.0.0.0 --port 8000
```

6. **Access API Documentation**
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## üß™ Testing

### Run All Tests
```bash
# Run all 124 tests
python -m pytest tests/unit/ --tb=short

# Run with coverage
python -m pytest tests/unit/ --cov=trm_api --cov-report=html

# Test ML-Enhanced Reasoning Engine
python test_ml_reasoning_simple.py

# Test specific components
python -m pytest tests/unit/test_adaptive_learning_system.py -v
python -m pytest tests/unit/test_advanced_reasoning_engine.py -v
```

### Test Categories
- **Unit Tests**: 124+ tests cho core logic
- **ML Reasoning Tests**: Comprehensive tests cho ML-enhanced reasoning
- **Adaptive Learning Tests**: 17+ tests cho adaptive learning system
- **All Tests**: 124/124 PASSING ‚úÖ

## ü§ñ ML-Enhanced API Documentation

### ML Reasoning Endpoints
```
POST   /api/v1/ml-reasoning/reason              # Perform ML-enhanced reasoning
POST   /api/v1/ml-reasoning/train               # Train ML models
GET    /api/v1/ml-reasoning/patterns            # Analyze reasoning patterns
POST   /api/v1/ml-reasoning/recommendations     # Get reasoning recommendations
GET    /api/v1/ml-reasoning/statistics          # Get performance metrics
GET    /api/v1/ml-reasoning/health              # Health check
```

### Reasoning Types Supported
- **Deductive**: Logic-based reasoning t·ª´ general principles
- **Inductive**: Pattern-based reasoning t·ª´ specific observations
- **Abductive**: Best-explanation reasoning cho incomplete information
- **Analogical**: Similarity-based reasoning using analogies
- **Causal**: Cause-effect relationship reasoning
- **Probabilistic**: Statistical v√† probability-based reasoning
- **Quantum**: Quantum-enhanced reasoning v·ªõi WIN probability
- **Hybrid**: Combination c·ªßa multiple reasoning types

### ML Models Used
- **RandomForestClassifier**: Reasoning type prediction
- **GradientBoostingRegressor**: Confidence estimation
- **KMeans**: Context clustering v√† pattern recognition

## üìö API Documentation

### Core Entities
- **Agents**: Qu·∫£n l√Ω con ng∆∞·ªùi, AI agents, ƒë·ªëi t√°c
- **Projects**: Theo d√µi d·ª± √°n t·ª´ t·∫°o ‚Üí th·ª±c hi·ªán ‚Üí ho√†n th√†nh  
- **Tasks**: Giao vi·ªác, theo d√µi ti·∫øn ƒë·ªô, qu·∫£n l√Ω assignees
- **WINs**: Ghi nh·∫≠n th√†nh t·ª±u, ƒëo l∆∞·ªùng impact
- **Recognitions**: C√¥ng nh·∫≠n ƒë√≥ng g√≥p, k·∫øt n·ªëi v·ªõi WINs
- **Knowledge Snippets**: L∆∞u tr·ªØ tri th·ª©c, kinh nghi·ªám
- **Events**: Ghi l·∫°i m·ªçi s·ª± ki·ªán quan tr·ªçng
- **Tensions**: Qu·∫£n l√Ω v·∫•n ƒë·ªÅ v√† c∆° h·ªôi

### Key Relationships
- `GIVEN_BY`: Recognition ƒë∆∞·ª£c trao b·ªüi ai
- `RECEIVED_BY`: Recognition ƒë∆∞·ª£c nh·∫≠n b·ªüi ai
- `RECOGNIZES_WIN`: Recognition c√¥ng nh·∫≠n WIN n√†o  
- `GENERATES_KNOWLEDGE`: WIN t·∫°o ra tri th·ª©c g√¨
- `LEADS_TO_WIN`: Project/Event d·∫´n ƒë·∫øn WIN
- `RESOLVES`: Task gi·∫£i quy·∫øt tension n√†o

### API Endpoints

#### Entities CRUD
```
GET    /api/v1/{entity}/              # List entities
POST   /api/v1/{entity}/              # Create entity
GET    /api/v1/{entity}/{id}          # Get entity by ID
PUT    /api/v1/{entity}/{id}          # Update entity
DELETE /api/v1/{entity}/{id}          # Delete entity
```

#### Relationships
```
POST   /api/v1/{entity}/{id}/relationships/{relationship_type}/{target_id}
DELETE /api/v1/{entity}/{id}/relationships/{relationship_type}/{target_id}
GET    /api/v1/{entity}/{id}/relationships/{relationship_type}
```

#### Specialized Endpoints
```
GET    /api/v1/recognitions/{id}/wins                    # WINs recognized
GET    /api/v1/wins/{id}/knowledge-snippets              # Knowledge generated
GET    /api/v1/agents/{id}/recognitions/given            # Recognitions given
GET    /api/v1/agents/{id}/recognitions/received         # Recognitions received
```

## üê≥ Docker Deployment

### Development
```bash
docker-compose up -d
```

### Production
```bash
# Build production image
docker build -t trm-os:latest .

# Run with production config
docker run -d \
  --name trm-os-api \
  -p 8000:8000 \
  --env-file .env \
  trm-os:latest
```

## üîß Configuration

### Environment Variables
```bash
# Neo4j Configuration
NEO4J_URI=bolt+s://your-instance.databases.neo4j.io
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your-password

# API Configuration
API_V1_STR=/api/v1
PROJECT_NAME=TRM-OS
VERSION=2.0.0

# Security
SECRET_KEY=your-secret-key
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ML Configuration
ML_MODEL_PATH=./models/
REASONING_CONFIDENCE_THRESHOLD=0.7
LEARNING_RATE=0.001

# External APIs (optional)
OPENAI_API_KEY=your-openai-key
ANTHROPIC_API_KEY=your-anthropic-key
```

## üìÅ Project Structure

```
trm-os-branches/
‚îú‚îÄ‚îÄ trm_api/                    # Main application code
‚îÇ   ‚îú‚îÄ‚îÄ api/v1/                # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ core/                  # Core configuration
‚îÇ   ‚îú‚îÄ‚îÄ models/                # Pydantic models
‚îÇ   ‚îú‚îÄ‚îÄ graph_models/          # Neo4j graph models
‚îÇ   ‚îú‚îÄ‚îÄ services/              # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ repositories/          # Data access layer
‚îÇ   ‚îú‚îÄ‚îÄ adapters/              # Data transformation
‚îÇ   ‚îî‚îÄ‚îÄ utils/                 # Utilities
‚îú‚îÄ‚îÄ tests/                     # Test suite (124 tests)
‚îÇ   ‚îú‚îÄ‚îÄ unit/                  # Unit tests
‚îÇ   ‚îî‚îÄ‚îÄ api/                   # API tests
‚îú‚îÄ‚îÄ docs/                      # Documentation
‚îú‚îÄ‚îÄ scripts/                   # Utility scripts
‚îú‚îÄ‚îÄ migrations/                # Database migrations
‚îî‚îÄ‚îÄ docker-compose.yml         # Docker configuration
```

## üîÑ Development Workflow

### 1. Feature Development
```bash
# Create feature branch
git checkout -b feature/new-feature

# Develop & test
python -m pytest tests/ -x

# Submit PR
git push origin feature/new-feature
```

### 2. Code Quality
```bash
# Format code
black trm_api/
isort trm_api/

# Lint code  
flake8 trm_api/
mypy trm_api/

# Security check
bandit -r trm_api/
```

### 3. Database Migrations
```bash
# Create migration
python scripts/create_migration.py "migration_name"

# Apply migrations
python scripts/apply_migrations.py
```

## üìä Monitoring & Observability

### Health Checks
```bash
# API Health
curl http://localhost:8000/health

# Database Health
curl http://localhost:8000/health/database
```

### Metrics & Logging
- **Application Logs**: Structured JSON logging
- **Performance Metrics**: Request/response times
- **Error Tracking**: Comprehensive error handling
- **Database Monitoring**: Neo4j query performance

## üö¶ API v2 Roadmap

### Planned Features
- **Real-time WebSocket API**: Live updates cho entities
- **Advanced AI Agents**: Automated decision making
- **GraphQL Support**: Flexible query capabilities  
- **Multi-tenant Architecture**: Support multiple organizations
- **Advanced Analytics**: Business intelligence dashboard
- **External Integrations**: Slack, Teams, Google Workspace

### Migration Path
- **v1 ‚Üí v2**: Backward compatible migration
- **Deprecation Timeline**: 6 months support for v1
- **Migration Tools**: Automated data migration scripts

## ü§ù Contributing

### Getting Started
1. Fork repository
2. Create feature branch
3. Add tests for new functionality
4. Ensure all tests pass (124/124)
5. Submit pull request

### Code Standards
- **Test Coverage**: Maintain 95%+ coverage
- **Documentation**: Update API docs for changes
- **Type Hints**: Full type annotation required
- **Error Handling**: Comprehensive error management

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support

### Documentation
- **API Docs**: http://localhost:8000/docs
- **Architecture**: [docs/architecture/](docs/architecture/)
- **Integration Guide**: [docs/integration-specs/](docs/integration-specs/)

### Community
- **Issues**: [GitHub Issues](https://github.com/trm-os/trm-os-branches/issues)
- **Discussions**: [GitHub Discussions](https://github.com/trm-os/trm-os-branches/discussions)
- **Email**: support@trm-os.com

---

**Built with ‚ù§Ô∏è by the TRM Team**

*TRM-OS: Transforming organizations through intelligent knowledge management*

## üí¨ Conversational Intelligence API

### Conversation Endpoints
```
POST   /api/v2/conversations/analyze            # Analyze natural language message
POST   /api/v2/conversations/sessions           # Create conversation session
GET    /api/v2/conversations/sessions/{id}      # Get session info
DELETE /api/v2/conversations/sessions/{id}      # End session
GET    /api/v2/conversations/sessions/{id}/history     # Get conversation history
GET    /api/v2/conversations/sessions/{id}/analytics   # Get session analytics
WS     /api/v2/conversations/realtime/{id}      # Real-time WebSocket chat
GET    /api/v2/conversations/health             # Health check
```

### Supported Intents
- **CREATE_PROJECT**: T·∫°o d·ª± √°n m·ªõi
- **ANALYZE_TENSION**: Ph√¢n t√≠ch v·∫•n ƒë·ªÅ/c∆° h·ªôi
- **GET_AGENT_HELP**: T√¨m ki·∫øm tr·ª£ gi√∫p t·ª´ agents
- **CHECK_STATUS**: Ki·ªÉm tra tr·∫°ng th√°i c√¥ng vi·ªác
- **GENERATE_SOLUTION**: T·∫°o gi·∫£i ph√°p cho v·∫•n ƒë·ªÅ
- **SEARCH_KNOWLEDGE**: T√¨m ki·∫øm th√¥ng tin/tri th·ª©c
- **UPDATE_RESOURCE**: C·∫≠p nh·∫≠t t√†i nguy√™n
- **SCHEDULE_TASK**: L√™n l·ªãch c√¥ng vi·ªác
- **GET_INSIGHTS**: L·∫•y insights v√† ph√¢n t√≠ch

### Example Conversation Flow
```python
# 1. Create conversation session
session = await conversation_manager.create_session(user_id="user123")

# 2. Send message
response = await conversation_manager.analyze(
    session_id=session.session_id,
    message="T√¥i c·∫ßn t·∫°o d·ª± √°n AI m·ªõi v·ªõi team 5 ng∆∞·ªùi",
    language="vi"
)

# 3. Get ML-enhanced response
print(f"Intent: {response.intent_detected}")
print(f"Confidence: {response.confidence}")
print(f"Response: {response.response_text}")
print(f"Actions: {response.suggested_actions}")
``` 